<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Strateole 2 Project: Networking WiFi</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Strateole 2 Project"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Strateole 2 Project
   </div>
   <div id="projectbrief">ScrippsInstituteofOceanography@UCSD</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('networking_wifi.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Networking WiFi </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Configuring Wifi to work in Debian from the command line is now quite easy thanks to a tool called connmanctl. To set up your BeagleBone Black with a wifi dongle, plug in the dongle while the BeagleBone is powered off then power it on while connected to wifi. These instructions also apply to the BeagleBone Blue, Black Wireless, and Green Wireless.</p>
<p>Once you have restarted your BeagleBone with a wifi dongle plugged in, SSH in with the USB network conenction. Then use ifconfig to confirm the dongle is recognized. Note that no ipv4 address is assigned yet as we haven't yet set up a connection.</p>
<h1><a class="anchor" id="basiccommands"></a>
Basic Commands</h1>
<div class="fragment"><div class="line">root@beaglebone:~# ifconfig wlan0</div><div class="line">wlan0     Link encap:Ethernet  HWaddr ec:11:27:bf:fa:51</div><div class="line">          UP BROADCAST MULTICAST DYNAMIC  MTU:1500  Metric:1</div><div class="line">          RX packets:833 errors:0 dropped:0 overruns:0 frame:0</div><div class="line">          TX packets:142 errors:0 dropped:0 overruns:0 carrier:0</div><div class="line">          collisions:0 txqueuelen:1000</div><div class="line">          RX bytes:114829 (112.1 KiB)  TX bytes:26578 (25.9 KiB)</div></div><!-- fragment --><p>Now start the connmanctl tool, enable wifi, and disable wifi tethering. Ignore any warnings regarding VPN connections. Depending on your image tethering may already be disabled.</p>
<div class="fragment"><div class="line">root@beaglebone:~# connmanctl</div><div class="line">connmanctl&gt; enable wifi</div><div class="line">Enabled wifi</div><div class="line">connmanctl&gt; tether wifi disable</div><div class="line">Disabled tethering <span class="keywordflow">for</span> wifi</div></div><!-- fragment --><p>Now we can scan for networks with 'scan wifi'. Once it says Scan complete, run 'services' to list the available networks.</p>
<div class="fragment"><div class="line">connmanctl&gt; scan wifi</div><div class="line">Scan completed <span class="keywordflow">for</span> wifi</div><div class="line">connmanctl&gt; services</div><div class="line">        wheelies2.4          wifi_ec1127bffa51_776865656c696573322e34_managed_psk</div><div class="line">        ATT5363              wifi_ec1127bffa51_41545435333633_managed_psk</div><div class="line">        2WIRE407             wifi_ec1127bffa51_3257495245343037_managed_psk</div><div class="line">        ATT8fHHhfi           wifi_ec1127bffa51_41545438664848686669_managed_psk</div><div class="line">connmanctl&gt;</div></div><!-- fragment --><h1><a class="anchor" id="connecting1"></a>
Connecting with Passkey</h1>
<p>To connect to a network with WPA/WPA2 security you need to enable the WPA agent. Then connect to your desired networking using the long name listed instead of the SSID. Don't worry, you can use the tab key to autocomplete the name.</p>
<div class="fragment"><div class="line">connmanctl&gt; agent on</div><div class="line">Agent registered</div><div class="line">connmanctl&gt;</div><div class="line">connmanctl&gt; connect wifi_ec1127bffa51_776865656c696573322e34_managed_psk</div><div class="line">Agent RequestInput wifi_ec1127bffa51_776865656c696573322e34_managed_psk</div><div class="line">  Passphrase = [ Type=psk, Requirement=mandatory, Alternates=[ WPS ] ]</div><div class="line">  WPS = [ Type=wpspin, Requirement=alternate ]</div><div class="line">Passphrase? your_password</div><div class="line">connmanctl&gt;</div><div class="line">Connected wifi_ec1127bffa51_776865656c696573322e34_managed_psk</div><div class="line">connmanctl&gt;</div></div><!-- fragment --><p>Now check to see what ipv4 address your BeagleBone was assigned by your router's DHCP service.</p>
<div class="fragment"><div class="line">connmanctl&gt; quit</div><div class="line">root@beaglebone:~#</div><div class="line">root@beaglebone:~# ifconfig wlan0</div><div class="line">wlan0     Link encap:Ethernet  HWaddr ec:11:27:bf:fa:51</div><div class="line">          inet addr:192.168.1.172  Bcast:192.168.1.255  Mask:255.255.255.0</div><div class="line">          inet6 addr: fe80::ee11:27ff:febf:fa51/64 Scope:Link</div><div class="line">          UP BROADCAST RUNNING MULTICAST DYNAMIC  MTU:1500  Metric:1</div><div class="line">          RX packets:976 errors:0 dropped:0 overruns:0 frame:0</div><div class="line">          TX packets:403 errors:0 dropped:0 overruns:0 carrier:0</div><div class="line">          collisions:0 txqueuelen:1000</div><div class="line">          RX bytes:136872 (133.6 KiB)  TX bytes:91792 (89.6 KiB)</div><div class="line"></div><div class="line">root@beaglebone:~#</div></div><!-- fragment --><p>Here you can see my beaglebone was assigned the address 192.168.1.172 which can now be used to SSH in over the network.</p>
<h1><a class="anchor" id="connecting2"></a>
Networks with Enterprise Login</h1>
<p>Many wifi networks such as those found at universities and enterprises, require a user login instead of a shared passphrase. To demonstrate how to configure connman to connect to such networks, we will use the UCSD campus-wide network as an example.</p>
<p>Start with a normal scan and look for the desired enterprise network.</p>
<div class="fragment"><div class="line">connmanctl&gt; scan wifi</div><div class="line">Scan completed <span class="keywordflow">for</span> wifi</div><div class="line">connmanctl&gt; services</div><div class="line">        UCSD-PROTECTED       wifi_000f540aa884_554353442d50524f544543544544-ieee8021x</div><div class="line">        ATT5363              wifi_ec1127bffa51_41545435333633_managed_psk</div><div class="line">        2WIRE407             wifi_ec1127bffa51_3257495245343037_managed_psk</div><div class="line">        ATT8fHHhfi           wifi_ec1127bffa51_41545438664848686669_managed_psk</div><div class="line">connmanctl&gt;</div></div><!-- fragment --><p>Note how the type of network is listed as ieee8021x indicating that it uses Network Access Control instead of a typical passkey (psk) as you would find in a consumer home network.</p>
<p>Make a new file in the /var/lib/connman/ directory with a name matching what is listed during the scan. For this example, the name would be 000f540aa884_554353442d50524f544543544544-ieee8021x.config</p>
<p>Fill in this file as follows, replacing the service name, SSID, Identity, and Passphrase with your own details. Your enterprise network may also use an authentication method other than PEAP and MSCHAPV2. Consult the IT help desk for your enterprise for details on that configuration.</p>
<div class="fragment"><div class="line">sudo nano /var/lib/connman/wifi_000f540aa884_554353442d50524f544543544544-ieee8021x.config</div></div><!-- fragment --><p>Enter your information into the new config file like so:</p>
<div class="fragment"><div class="line">[service_wifi_000f540aa884_554353442d50524f544543544544_managed_ieee8021x]</div><div class="line">Type = wifi</div><div class="line">SSID = 554353442d50524f544543544544</div><div class="line">EAP = peap</div><div class="line">Phase2 = MSCHAPV2</div><div class="line">Identity= USERNAME</div><div class="line">Passphrase= PASSWORD</div></div><!-- fragment --><p> Restart the connman service and check if the connection was successful</p>
<div class="fragment"><div class="line">sudo systemctl restart connman</div><div class="line">ifconfig wlan0</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
