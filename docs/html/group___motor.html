<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Strateole 2 Project: Motor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link rel="search" href="search_opensearch.php?v=opensearch.xml" type="application/opensearchdescription+xml" title="Strateole 2 Project"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Strateole 2 Project
   </div>
   <div id="projectbrief">HaaseResearchGroup@UCSD</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,true,'search.php','Search');
  $(document).ready(function() {
    if ($('.searchresults').length > 0) { searchBox.DOMSearchField().focus(); }
  });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___motor.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Motor</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Description</h2>
<p>Control 4 DC motor Channels. </p>
<p>&lt;rc/motor.h&gt;</p>
<p>The robotics cape can drive 4 DC motors bidirectionally powered only from a 2-cell lithium battery pack connected to the cape. The motors will not draw power from USB or the 9-18v DC Jack. Each channel can support 1.2A continuous and the user must be careful to choose motors which will not exceed this rating when stalled. Each channel is broken out on an independent 2-pin JST ZH connector.</p>
<dl class="section author"><dt>Author</dt><dd>James Strawson </dd></dl>
<dl class="section date"><dt>Date</dt><dd>1/31/2018 </dd></dl>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gacee0f846fc4c42ff926ebb78ffe76193"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___motor.html#gacee0f846fc4c42ff926ebb78ffe76193">RC_MOTOR_DEFAULT_PWM_FREQ</a>&#160;&#160;&#160;25000</td></tr>
<tr class="memdesc:gacee0f846fc4c42ff926ebb78ffe76193"><td class="mdescLeft">&#160;</td><td class="mdescRight">25kHz  <a href="#gacee0f846fc4c42ff926ebb78ffe76193">More...</a><br /></td></tr>
<tr class="separator:gacee0f846fc4c42ff926ebb78ffe76193"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad96f7bd379830f8874259870cc8b1701"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___motor.html#gad96f7bd379830f8874259870cc8b1701">rc_motor_init</a> ()</td></tr>
<tr class="memdesc:gad96f7bd379830f8874259870cc8b1701"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes all 4 motors and leaves them in a free-spin (0 throttle) state.  <a href="#gad96f7bd379830f8874259870cc8b1701">More...</a><br /></td></tr>
<tr class="separator:gad96f7bd379830f8874259870cc8b1701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf65e329bc17712d20acae1fd1e3d1ec1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___motor.html#gaf65e329bc17712d20acae1fd1e3d1ec1">rc_motor_init_freq</a> (int pwm_frequency_hz)</td></tr>
<tr class="memdesc:gaf65e329bc17712d20acae1fd1e3d1ec1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Just like rc_motor_init but allows the user to set the pwm frequency.  <a href="#gaf65e329bc17712d20acae1fd1e3d1ec1">More...</a><br /></td></tr>
<tr class="separator:gaf65e329bc17712d20acae1fd1e3d1ec1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaefe27f2efec6cc450e3bf30d8e5fd864"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___motor.html#gaefe27f2efec6cc450e3bf30d8e5fd864">rc_motor_cleanup</a> ()</td></tr>
<tr class="memdesc:gaefe27f2efec6cc450e3bf30d8e5fd864"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts all 4 motors into a free-spin (0 throttle) state, puts the h-bridges into standby mode, and closes all file pointers to GPIO and PWM systems.  <a href="#gaefe27f2efec6cc450e3bf30d8e5fd864">More...</a><br /></td></tr>
<tr class="separator:gaefe27f2efec6cc450e3bf30d8e5fd864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ee2b29b8ed1185a31abf8d7e45603fb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___motor.html#ga7ee2b29b8ed1185a31abf8d7e45603fb">rc_motor_standby</a> (int standby_en)</td></tr>
<tr class="memdesc:ga7ee2b29b8ed1185a31abf8d7e45603fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggle the H-bridges in and out of low-power standby mode.  <a href="#ga7ee2b29b8ed1185a31abf8d7e45603fb">More...</a><br /></td></tr>
<tr class="separator:ga7ee2b29b8ed1185a31abf8d7e45603fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeaf337ad16953c9f9412d96a600eccc1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___motor.html#gaeaf337ad16953c9f9412d96a600eccc1">rc_motor_set</a> (int ch, double duty)</td></tr>
<tr class="memdesc:gaeaf337ad16953c9f9412d96a600eccc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the bidirectional duty cycle (power) to a single motor or all motors if 0 is provided as a channel.  <a href="#gaeaf337ad16953c9f9412d96a600eccc1">More...</a><br /></td></tr>
<tr class="separator:gaeaf337ad16953c9f9412d96a600eccc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0a02d33c26c19955c7921b1ce74d6250"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___motor.html#ga0a02d33c26c19955c7921b1ce74d6250">rc_motor_free_spin</a> (int ch)</td></tr>
<tr class="memdesc:ga0a02d33c26c19955c7921b1ce74d6250"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts a motor into a zero-throttle state allowing it to spin freely.  <a href="#ga0a02d33c26c19955c7921b1ce74d6250">More...</a><br /></td></tr>
<tr class="separator:ga0a02d33c26c19955c7921b1ce74d6250"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga470369dde3e084f0a2a5c99db61f9494"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___motor.html#ga470369dde3e084f0a2a5c99db61f9494">rc_motor_brake</a> (int ch)</td></tr>
<tr class="memdesc:ga470369dde3e084f0a2a5c99db61f9494"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connects the motor terminal pairs together which makes the motor fight against its own back EMF turning it into a brake resisting rotation.  <a href="#ga470369dde3e084f0a2a5c99db61f9494">More...</a><br /></td></tr>
<tr class="separator:ga470369dde3e084f0a2a5c99db61f9494"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gacee0f846fc4c42ff926ebb78ffe76193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacee0f846fc4c42ff926ebb78ffe76193">&#9670;&nbsp;</a></span>RC_MOTOR_DEFAULT_PWM_FREQ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RC_MOTOR_DEFAULT_PWM_FREQ&#160;&#160;&#160;25000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>25kHz </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gad96f7bd379830f8874259870cc8b1701"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad96f7bd379830f8874259870cc8b1701">&#9670;&nbsp;</a></span>rc_motor_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_motor_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes all 4 motors and leaves them in a free-spin (0 throttle) state. </p>
<p>Note, if the user is optionally using the rc_motor_standby functionality they should be aware that rc_motor_init starts standby mode in a disabled state so it is not necessary for the majority of users who are not interested in standby mode.</p>
<p>This starts the motor drivers at RC_MOTOR_DEFAULT_PWM_FREQ. To use another frequency initialize with rc_motor_init_freq instead.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure which is usually due to lack of user permissions to access the gpio and pwm systems. </dd></dl>

</div>
</div>
<a id="gaf65e329bc17712d20acae1fd1e3d1ec1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf65e329bc17712d20acae1fd1e3d1ec1">&#9670;&nbsp;</a></span>rc_motor_init_freq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_motor_init_freq </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pwm_frequency_hz</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Just like rc_motor_init but allows the user to set the pwm frequency. </p>
<p>RC_MOTOR_DEFAULT_PWM_FREQ is a good frequency to start at.</p>
<p>Note, if the user is optionally using the rc_motor_standby functionality they should be aware that rc_motor_init starts standby mode in a disabled state so it is not necessary for the majority of users who are not interested in standby mode.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">pwm_frequency_hz</td><td>The pwm frequency in hz</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure which is usually due to lack of user permissions to access the gpio and pwm systems. </dd></dl>

</div>
</div>
<a id="gaefe27f2efec6cc450e3bf30d8e5fd864"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaefe27f2efec6cc450e3bf30d8e5fd864">&#9670;&nbsp;</a></span>rc_motor_cleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_motor_cleanup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Puts all 4 motors into a free-spin (0 throttle) state, puts the h-bridges into standby mode, and closes all file pointers to GPIO and PWM systems. </p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure. </dd></dl>

</div>
</div>
<a id="ga7ee2b29b8ed1185a31abf8d7e45603fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7ee2b29b8ed1185a31abf8d7e45603fb">&#9670;&nbsp;</a></span>rc_motor_standby()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_motor_standby </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>standby_en</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Toggle the H-bridges in and out of low-power standby mode. </p>
<p>This is an entirely optional function as calling rc_motor_cleanup when your program closes will put the h-bridges into standby mode and then calling rc_motor_init at the beginning of your program will take them out of standby mode. However, if the user wishes to toggle in and out of standby mode in their program (for example while paused) then they can use this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">standby_en</td><td>1 to enable standby mode, 0 to disable</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure. </dd></dl>

</div>
</div>
<a id="gaeaf337ad16953c9f9412d96a600eccc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeaf337ad16953c9f9412d96a600eccc1">&#9670;&nbsp;</a></span>rc_motor_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_motor_set </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>duty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the bidirectional duty cycle (power) to a single motor or all motors if 0 is provided as a channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>The motor channel (1-4) or 0 for all channels. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">duty</td><td>Duty cycle, -1.0 for full reverse, 1.0 for full forward</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

</div>
</div>
<a id="ga0a02d33c26c19955c7921b1ce74d6250"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0a02d33c26c19955c7921b1ce74d6250">&#9670;&nbsp;</a></span>rc_motor_free_spin()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_motor_free_spin </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Puts a motor into a zero-throttle state allowing it to spin freely. </p>
<p>This is accomplished by putting both motor terminals connected to the h-bridge into a high-impedance state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>The motor channel (1-4) or 0 for all channels.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

</div>
</div>
<a id="ga470369dde3e084f0a2a5c99db61f9494"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga470369dde3e084f0a2a5c99db61f9494">&#9670;&nbsp;</a></span>rc_motor_brake()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int rc_motor_brake </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ch</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connects the motor terminal pairs together which makes the motor fight against its own back EMF turning it into a brake resisting rotation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ch</td><td>The motor channel (1-4) or 0 for all channels.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, -1 on failure </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.13-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
